var count=0;var errortime=0;var service=0;var cur_reg_email="";var cur_reg_mobile="";var cur_passtype="";var cur_username="";var cur_loginacc="";var act_dft_tips="您的注册信息已提交，<span class='g_font'>激活邮件已经发送到您刚刚填写的电子邮箱地址，</span>请注意查收。 邮件中包含我们寄送的<span class='g_font'>激活码</span>，请在下面输入您的激活码，以完成注册。";var cur_reg_type=1;var cur_getpwd_questiontype=1;var sms_active_timeout=180;var sms_active_intervar_Id="";var mob_patterns=/^0{0,1}1[0-9]{10}$/;var email_patterns=/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/;var checkrt=false;var secritUser="";var username=false;var pass=false;var pass2=false;var email=false;var code=false;var curLoginArray=new Array();curLoginArray["uid"]=0;curLoginArray["type"]=2;curLoginArray["username"]="";curLoginArray["email"]="";curLoginArray["mobile"]="";curLoginArray["globalact"]="";function ajax_getData(postBody,asoft_asp_file,gf_method,is_async){var return_temp;$.ajax({async:is_async,url:asoft_asp_file,type:gf_method,data:postBody,cache:false,success:function(data){return_temp=data}});return return_temp}function getDomain(){var data=[];var currentUrl=encodeURI(window.location.href);if(currentUrl.indexOf("test")>-1||currentUrl.indexOf("devel")>-1||currentUrl.indexOf("local")>-1){data=["bbs.wanyol.com"]}else{data=["bbs.oppo.cn","bbs.coloros.com"]}return data}function cross_domain_center(callback){var cookie_url3="?q=index/crossdomain&domain=bbs.coloros.com&loginfile=setssocookie.php";var curImg3=new Image();curImg3.src=cookie_url3;var cookie_url4="?q=index/crossdomain&domain=bbs.oppo.cn&loginfile=setssocookie.php";var curImg4=new Image();curImg4.src=cookie_url4;function iscomplete(callback){var agent=navigator.userAgent.toLowerCase();if(agent.indexOf("trident")>0&&agent.indexOf("rv:11.")>0){setTimeout(function(){callback.call()},200)}else{if(curImg4.complete==true||curImg4.width>0){callback.call()}else{setTimeout(function(){iscomplete(callback)},10)}}}iscomplete(callback)}function check_ctime(){if($(".login_ctime").hasClass("uncheck")){$(".login_ctime").removeClass("uncheck").attr("lid","1")}else{$(".login_ctime").addClass("uncheck").attr("lid","0")}}function changecolor(){$(".gBtn").css("background-color","#00925f")}function fade(){$(".gBtn").css("background-color","#409f73")}function account(){if(navigator.appName=="Microsoft Internet Explorer"){if(navigator.appVersion.match(/6./i)=="6."||navigator.appVersion.match(/7./i)=="7."||navigator.appVersion.match(/8./i)=="8."){$(".circle li").removeClass("stept");$(" .num").css("display","none");$("#two").css("background","url(images/icons.png)");$("#two").css("width","48px");$("#two").css("height","48px");$("#two").css("background-position","-224px -40px");$("#now").css("background","url(images/icons.png)");$("#now").css("width","48px");$("#now").css("height","48px");$("#now").css("background-position","-152px -96px");$("#three").css("background","url(images/icons.png)");$("#three").css("width","48px");$("#three").css("height","48px");$("#three").css("background-position","-296px -40px")}}}function checkmobile(username){$.ajax({url:"?q=user/checkmobile",type:"post",data:"mobile="+username,cache:false,success:function(data){data=parseFloat(data);if(data<=0){var error="";switch(data){case -1:error="抱歉，手机号码格式不正确";break;case -2:error="";break;case -3:error="抱歉，该手机号码已被注册！";break;default:error="通信错误，手机号码检测操作终止！";break}$("#hasdone .error").css("background-position","-64px -80px");$("#hasdone .eInfo").empty();$("#hasdone .eInfo").append(error);return false}else{return true}}})}function checkemail(username){$.ajax({url:"?q=user/checkemail",type:"post",data:"email="+encodeURIComponent(username),cache:false,success:function(data){data=parseFloat(data);if(data<=0){var error="";switch(data){case -1:error="抱歉，Email地址格式不正确";break;case -2:error="OPPO推荐您使用主流邮箱以快速激活帐户";break;case -3:error="抱歉，该Email已被注册！";break;default:error="通信错误，Email地址检测操作终止！";break}$("#hasdone .error").css("background-position","-64px -80px");$("#hasdone .eInfo").empty();$("#hasdone .eInfo").append(error);return false}else{return true}}})}function screenInfo(){var width;var height;height=window.screen.height;width=window.screen.width;document.body.style.height=height}function set_err(error_class,eIno_class,msg){if(typeof(error_class)=="undefined"||typeof(eIno_class)=="undefined"){return false}$("."+error_class).css("display","block");$("."+eIno_class).css("display","block").html(msg);return false}function closefc(){$(".lead-tips").css("display","none");$(".bg-fc").css("display","none");cross_domain_center(function(){var url=$(".banner-tips").attr("back");if(!url){url="http://www.oppo.com/"}window.location.href=url})}function correctPNG(){var arVersion=navigator.appVersion.split("MSIE");var version=parseFloat(arVersion[1]);if((version>=5.5&&version<8)&&(document.body.filters)){for(var j=0;j<document.images.length;j++){var img=document.images[j];var imgName=img.src.toUpperCase();var imgtmp=new Image();imgtmp.src=img.src;var width=imgtmp.width;var height=imgtmp.height;if(imgName.toLowerCase().indexOf(".png")>0){var imgID=(img.id)?"id='"+img.id+"' ":"";
    var imgClass=(img.className)?"class='"+img.className+"' ":"";var imgTitle=(img.title)?"title='"+img.title+"' ":"title='"+img.alt+"' ";var imgStyle="display:inline-block;"+img.style.cssText;if(img.align=="left"){imgStyle="float:left;"+imgStyle}if(img.align=="right"){imgStyle="float:right;"+imgStyle}if(img.parentElement.href){imgStyle="cursor:hand;"+imgStyle}var strNewHTML="<span "+imgID+imgClass+imgTitle+' style="'+"width:"+width+"px; height:"+height+"px;"+imgStyle+";"+"filter:progid:DXImageTransform.Microsoft.AlphaImageLoader"+"(src='"+img.src+"', sizingMethod='scale');\"></span>";img.outerHTML=strNewHTML;j=j-1}}}}function get_code(){$("#auth_code").attr("src","?q=index/verify&rd="+Math.random());$("#vercode").val("")}function testpass(password){var score=0;score+=password.length*4;score+=(repeat(1,password).length-password.length)*1;score+=(repeat(2,password).length-password.length)*1;score+=(repeat(3,password).length-password.length)*1;score+=(repeat(4,password).length-password.length)*1;if(password.match(/(.*[0-9].*[0-9].*[0-9])/)){score+=5}if(password.match(/(.*[!,@,#,$,%,^,&,*,?,_,~].*[!,@,#,$,%,^,&,*,?,_,~])/)){score+=5}if(password.match(/([a-z].*[A-Z])|([A-Z].*[a-z])/)){score+=10}if(password.match(/([a-zA-Z])/)&&password.match(/([0-9])/)){score+=15}if(password.match(/([!,@,#,$,%,^,&,*,?,_,~])/)&&password.match(/([0-9])/)){score+=15}if(password.match(/([!,@,#,$,%,^,&,*,?,_,~])/)&&password.match(/([a-zA-Z])/)){score+=15}if(password.match(/^\w+$/)||password.match(/^\d+$/)){score-=10}if(score<0){score=0}if(score>100){score=100}return score}function repeat(len,str){var res="";for(var i=0;i<str.length;i++){var repeated=true;for(var j=0,max=str.length-i-len;j<len&&j<max;j++){repeated=repeated&&(str.charAt(j+i)==str.charAt(j+i+len))}if(j<len){repeated=false}if(repeated){i+=len-1;repeated=false}else{res+=str.charAt(i)}}return res}function check_pass_strong(){var password=document.getElementById("pw").value;if(password){var score=testpass(password);$(".strong").css("display","block");if(score<34){$(".strong .middle").css({"opacity":"1","filter":"alpha(opacity=100)","-moz-opacity":"1"});$(".strong .middle").css({"opacity":"0.7","filter":"alpha(opacity=70)","-moz-opacity":"0.7"});$(".strong .high").css({"opacity":"0.7","filter":"alpha(opacity=70)","-moz-opacity":"0.7"})}else{if(score<68){$(".strong .default").css({"opacity":"1","filter":"alpha(opacity=100)","-moz-opacity":"1"});$(".strong .middle").css({"opacity":"1","filter":"alpha(opacity=100)","-moz-opacity":"1"});$(".strong .high").css({"opacity":"0.7","filter":"alpha(opacity=70)","-moz-opacity":"0.7"})}else{$(".strong .default").css({"opacity":"1","filter":"alpha(opacity=100)","-moz-opacity":"1"});$(".strong .middle").css({"opacity":"1","filter":"alpha(opacity=100)","-moz-opacity":"1"});$(".strong .high").css({"opacity":"1","filter":"alpha(opacity=100)","-moz-opacity":"1"})}}}else{$(".strong").css("display","none")}}function check_pass(){var password=document.getElementById("pw").value;$("div.login span").remove(".rightIcon").remove(".errorIcon").remove(".errorMsg");if(""==password){$(".login").append('<span class="errorIcon"></span><span class="errorMsg">请输入登录密码</span>');return false}else{check_pass_strong();var reg=/^[0-9a-zA-Z!@#\$%\^\&\*\-_\+\=\|:;,\.\?]{6,16}$/i;if(reg.test(password)){var reg2=/^[0-9]{6,16}$/;var reg3=/^[a-zA-Z]{6,16}$/i;var reg4=/^[!@#\$%\^\&\*\-_\+\=\|:;,\.\?]{6,16}$/i;if(reg2.test(password)||reg3.test(password)||reg4.test(password)){$(".login").append('<span class="errorIcon"></span><span class="errorMsg">密码长度6~16位，数字、字母、字符至少包含两种</span>');return false}else{$(".login").append('<span class="rightIcon"></span>');return true}}else{$(".login").append('<span class="errorIcon"></span><span class="errorMsg">密码长度6~16位，数字、字母、字符至少包含两种</span>');return false}}}function check_repass(){var password=document.getElementById("pw").value;var repassword=document.getElementById("pwd").value;$("div.makesure span").remove(".rightIcon").remove(".errorIcon").remove(".errorMsg");if(""==repassword){$(".makesure").append('<span class="errorIcon"></span><span class="errorMsg">请输入确认密码</span>');return false}else{if(password!=repassword){$(".makesure").append('<span class="errorIcon"></span><span class="errorMsg">两次密码不一致</span>');return false}else{$(".makesure").append('<span class="rightIcon"></span>');return true}}}$(function(){$("#pw").blur(function(){check_pass()});$("#pw").focus(function(){$("div.login span").css("display","none")});$("#pw").keyup(function(){check_pass_strong()});$("#pwd").blur(function(){check_repass()});$("#pwd").focus(function(){$("div.makesure span").css("display","none")})});